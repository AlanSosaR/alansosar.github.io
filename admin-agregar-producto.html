<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agregar producto | Café Cortero</title>

  <!-- TIPOGRAFÍA -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- ICONOS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- MATERIAL SYMBOLS -->
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@300;400;500&display=swap">

  <!-- HEADER -->
  <link rel="stylesheet" href="css/header.css?v=30">

  <!-- CSS PROPIO -->
  <link rel="stylesheet" href="css/admin-agregar-producto.css?v=3">
</head>

<body class="page-admin header-checkout">

<!-- =====================================================
     HEADER GLOBAL
====================================================== -->
<header class="header-fixed" id="main-header">
  <button id="menu-toggle" class="menu-toggle" aria-label="Abrir menú">
    <span class="material-symbols-outlined">menu</span>
  </button>

  <h1 class="header-title">Agregar producto</h1>

  <a href="index.html" class="header-logo-link">
    <img src="imagenes/logo.png" alt="Café Cortero" class="header-logo">
  </a>
</header>

<!-- =====================================================
     CONTENIDO
====================================================== -->
<main class="profile-container">

  <section class="profile-card">

    <!-- BOTÓN ATRÁS -->
    <button class="back-btn" onclick="history.back()">
      <span class="material-symbols-outlined">chevron_left</span>
    </button>

    <div class="profile-inner-card">

      <!-- ================= FORM ================= -->
      <form id="producto-form" novalidate>

        <!-- ================= IMAGEN ================= -->
        <div class="m3-field">
          <div class="upload-box" id="uploadBox">

            <img id="imagePreview"
                 class="upload-preview hidden"
                 alt="Vista previa del producto">

            <span class="material-symbols-outlined upload-icon">photo_camera</span>
            <p class="upload-title">Subir imagen</p>
            <p class="upload-hint">JPG, PNG o WEBP (máx. 2 MB)</p>

            <input type="file" id="imagen" accept="image/*">
          </div>
        </div>

        <!-- NOMBRE -->
        <div class="m3-field">
          <div class="m3-input">
            <span class="material-symbols-outlined">inventory_2</span>
            <input id="nombre" type="text" placeholder=" " required>
            <label class="floating-label">Nombre del producto *</label>
          </div>
        </div>

        <!-- DESCRIPCIÓN -->
        <div class="m3-field">
          <div class="m3-input textarea-field">
            <span class="material-symbols-outlined">description</span>
            <textarea id="descripcion" rows="3" placeholder=" " required></textarea>
            <label class="floating-label">Descripción *</label>
          </div>
        </div>

        <!-- CATEGORÍA -->
        <div class="m3-field">
          <div class="m3-input">
            <span class="material-symbols-outlined">category</span>
            <select id="categoria" required>
              <option value="" disabled selected></option>
              <option value="Tradicional">Tradicional</option>
              <option value="Premium">Premium</option>
              <option value="Molido">Molido</option>
              <option value="Grano">Grano</option>
              <option value="Especial">Edición especial</option>
            </select>
            <label class="floating-label">Categoría *</label>
          </div>
        </div>

        <!-- PRESENTACIÓN -->
        <div class="m3-field">
          <div class="m3-input">
            <span class="material-symbols-outlined">scale</span>
            <select id="presentacion" required>
              <option value="" disabled selected></option>
              <option value="250g">250 g</option>
              <option value="500g">500 g</option>
              <option value="1lb">1 lb</option>
              <option value="pack">Pack regalo</option>
            </select>
            <label class="floating-label">Presentación / Tamaño *</label>
          </div>
        </div>

        <!-- PRECIO -->
        <div class="m3-field">
          <div class="m3-input">
            <span class="material-symbols-outlined">attach_money</span>
            <input id="precio" type="number" step="0.01" placeholder=" " required>
            <label class="floating-label">Precio *</label>
          </div>
        </div>

        <!-- STOCK -->
        <div class="m3-field">
          <div class="m3-input">
            <span class="material-symbols-outlined">warehouse</span>
            <input id="stock" type="number" min="0" placeholder=" " required>
            <label class="floating-label">Stock disponible *</label>
          </div>
        </div>

        <!-- ================= ESTADO (CORRECTO) ================= -->
        <div class="m3-field estado-field">

          <!-- TÍTULO ARRIBA -->
          <p class="field-title">Estado</p>

          <!-- SWITCH ABAJO -->
          <div class="estado-switch-wrapper">
            <label class="switch">
              <input type="checkbox" id="estadoToggle" checked>
              <span class="slider"></span>
            </label>

            <span id="estadoTexto" class="estado-label activo">Activo</span>
          </div>

          <!-- INPUT REAL PARA SUPABASE -->
          <input type="hidden" id="estadoHidden" value="activo">

        </div>

        <!-- BOTÓN -->
        <button type="submit" id="btn-submit" class="m3-btn">
          <span class="loader"></span>
          <span class="btn-text">Guardar producto</span>
        </button>

      </form>

    </div>
  </section>
</main>

<!-- SNACKBAR -->
<div id="snackbar" class="snackbar"></div>

<!-- =====================================================
     SCRIPTS
====================================================== -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="js/supabase-client-core.js"></script>
<script src="js/supabase-auth.js"></script>
<script src="js/auth-ui.js"></script>
<script src="js/layout.js"></script>
<script src="js/header.js"></script>

<!-- JS FINAL -->
<script src="js/admin-agregar-producto.js"></script>

</body>
</html>
