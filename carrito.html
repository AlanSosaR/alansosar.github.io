<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tu selecci√≥n de caf√© | Caf√© Cortero</title>

  <!-- Tipograf√≠a -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Material Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined">

  <!-- CSS -->
  <link rel="stylesheet" href="css/carrito.css?v=26">
</head>
<body>

<!-- =====================================================
     HEADER (IGUAL QUE INDEX, PARA QUE auth-ui.js CARGUE EL AVATAR)
====================================================== -->
<header>
    <a href="index.html" class="header-logo-link">
        <img src="imagenes/logo.png" alt="Caf√© Cortero" class="header-logo">
    </a>

    <span class="cart-title">
        Tu selecci√≥n de caf√© <span id="count-items">(0 caf√©s)</span>
    </span>

    <!-- Bot√≥n del avatar EXACTO al index -->
    <button id="btn-header-user" class="header-avatar-button">
        <img id="avatar-user" src="imagenes/avatar-default.svg" alt="Usuario" class="header-avatar">
    </button>

    <!-- Men√∫ usuario (igual al index, solo oculto por CSS) -->
    <div id="user-menu" class="user-menu hidden">
        <a href="mispedidos.html">üì¶ Mis pedidos</a>
        <a href="historial.html">üßæ Historial</a>
        <a href="perfil.html">üë§ Mi perfil</a>
        <button id="logout-btn">üö™ Cerrar sesi√≥n</button>
    </div>
</header>


<!-- =====================================================
        SEGUIR COMPRANDO
====================================================== -->
<div id="seguir-wrapper" class="seguir-comprando seguir-left">
    <button class="icon-back" onclick="window.location.href='index.html'">
        <span class="material-symbols-outlined">chevron_left</span>
    </button>
    <a href="index.html" class="seguir-link">Seguir comprando</a>
</div>


<!-- =====================================================
     TEMPLATES DE PRODUCTOS (CARRITO & GUARDADOS)
====================================================== -->

<!-- Item del carrito -->
<template id="template-cart-item">
    <div class="item">

        <div class="item-img-box">
            <img class="item-image" src="">
        </div>

        <div class="item-info">
            <div class="item-name"></div>
            <div class="item-price"></div>

            <!-- FILA 1: Controles -->
            <div class="qty-controls">
                <button class="qty-btn minus" data-action="minus">
                    <i class="fa-solid fa-minus"></i>
                </button>

                <span class="qty-number"></span>

                <button class="qty-btn plus" data-action="plus">
                    <i class="fa-solid fa-plus"></i>
                </button>

                <button class="del-btn" data-action="del">
                    <i class="fa-solid fa-trash"></i>
                </button>
            </div>

            <!-- FILA 2: Guardado -->
            <button class="save-later-btn" data-action="save">
                Guardar para m√°s tarde
            </button>

        </div>
    </div>
</template>


<!-- Item de guardado -->
<template id="template-saved-item">
    <div class="saved-item">

        <div class="saved-img-box">
            <img class="saved-image">
        </div>

        <div class="saved-info">
            <div class="saved-name"></div>
            <div class="saved-price"></div>
        </div>

        <div class="saved-buttons">
            <button class="saved-btn return" data-action="return">Mover al carrito</button>
            <button class="saved-btn delete" data-action="delete-saved">Eliminar</button>
        </div>

    </div>
</template>


<!-- =====================================================
     CONTENIDO PRINCIPAL
====================================================== -->
<main>
    <div class="grid-carrito">

        <!-- IZQUIERDA -->
        <div class="col-productos">
            <div id="cart-container"></div>

            <section id="saved-section" class="saved-wrapper">
                <div class="saved-card">
                    <h3 class="saved-card-title">Guardado para m√°s tarde</h3>

                    <div id="saved-list" class="saved-list empty-saved">
                        <p class="saved-empty-title">No hay caf√©s guardados todav√≠a</p>
                        <p class="saved-empty-sub">A√±ade a esta lista tus caf√©s que no est√°s comprando hoy</p>
                    </div>
                </div>
            </section>
        </div>

        <!-- DERECHA -->
        <div class="col-resumen" id="resumen-container">

            <!-- Snackbar -->
            <div id="snackbar-login" class="snackbar hidden">
                Necesitas iniciar sesi√≥n para continuar con tu pedido.
            </div>

        </div>

    </div>
</main>

<!-- Loader -->
<div id="page-loader" class="page-loader hidden">
    <div class="loader-circle"></div>
</div>


<!-- =====================================================
     SCRIPTS
====================================================== -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script src="js/supabase-client-core.js"></script>
<script src="js/supabase-auth.js"></script>
<script src="js/auth-ui.js"></script>

<!-- L√≥gica del carrito -->
<script src="js/cart.js?v=2600"></script>

</body>
</html>
