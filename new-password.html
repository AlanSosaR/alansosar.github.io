<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nueva contraseña | Café Cortero</title>

  <!-- Tipografía -->
  <link rel="stylesheet" href="css/tipografia.css" />

  <!-- Material Symbols -->
  <link
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
    rel="stylesheet"
  />

  <!-- Estilos de la página -->
  <link rel="stylesheet" href="css/new-password.css?v=2" />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="imagenes/logo.png" />
</head>

<body>

  <main class="login-container">
    <section class="login-card">

      <!-- HEADER -->
      <div class="login-header">
        <div class="logo-container" onclick="window.location.href='index.html'">
          <img src="imagenes/logo.png" class="logo-img" alt="Café Cortero" />
        </div>
        <h2 class="login-title">Nueva contraseña</h2>
      </div>

      <!-- TARJETA INTERIOR -->
      <div class="login-inner-card">

        <p class="descripcion">
          Crea tu nueva contraseña para continuar.
        </p>

        <form id="newPassForm" novalidate>

          <!-- NUEVA CONTRASEÑA -->
          <div class="m3-field">
            <div class="m3-input">
              <span class="material-symbols-outlined">lock</span>

              <input
                type="password"
                id="newPassword"
                autocomplete="new-password"
                placeholder=""
              />

              <label for="newPassword" class="floating-label">
                Nueva contraseña
              </label>

              <span
                class="material-symbols-outlined toggle-pass"
                data-target="newPassword"
              >
                visibility
              </span>
            </div>
          </div>

          <!-- BARRA DE FUERZA -->
          <div class="strength-bars">
            <span id="bar1"></span>
            <span id="bar2"></span>
            <span id="bar3"></span>
          </div>

          <!-- CONFIRMAR CONTRASEÑA -->
          <div class="m3-field">
            <div class="m3-input">
              <span class="material-symbols-outlined">lock</span>

              <input
                type="password"
                id="confirmPassword"
                autocomplete="new-password"
                placeholder=""
              />

              <label for="confirmPassword" class="floating-label">
                Confirmar contraseña
              </label>

              <span
                class="material-symbols-outlined toggle-pass"
                data-target="confirmPassword"
              >
                visibility
              </span>
            </div>
          </div>

          <!-- BOTÓN CON LOADER A LA IZQUIERDA -->
          <button type="submit" class="m3-btn">
            <span class="loader"></span>
            <span class="btn-text">Guardar contraseña</span>
          </button>

        </form>

        <!-- LINK -->
        <div class="links">
          <a href="login.html" class="back-link">
            Volver a iniciar sesión
          </a>
        </div>

      </div>
    </section>
  </main>

  <!-- SNACKBAR MATERIAL 3 EXPRESSIVE (ACTION) -->
  <div
    id="snackbar"
    class="snackbar hidden"
    role="status"
    aria-live="polite"
  >
    <span class="snackbar__msg"></span>

    <div class="snackbar__actions">
      <button
        type="button"
        class="snackbar__btn snackbar__btn--text"
        data-action="cancel"
      >
        Cancelar
      </button>

      <button
        type="button"
        class="snackbar__btn snackbar__btn--filled"
        data-action="confirm"
      >
        Confirmar
      </button>
    </div>
  </div>

  <!-- ===================== SCRIPTS ===================== -->

  <!-- Supabase SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Inicialización Supabase (define window.supabaseClient) -->
  <script src="js/supabase-client-core.js"></script>

  <!-- Helpers de auth (si los usas en tu proyecto) -->
  <script src="js/supabase-auth.js"></script>

  <!-- UI helpers (si aquí usas snackbar/acciones centralizadas) -->
  <script src="js/auth-ui.js"></script>

  <!-- Lógica de nueva contraseña -->
  <script src="js/new-password.js?v=2"></script>

</body>
</html>
