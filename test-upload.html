<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Prueba Upload Supabase</title>
</head>
<body>

  <h2>Prueba de subida a Supabase Storage</h2>
  <p>Esto sube un archivo de prueba al bucket <b>avatars</b>.</p>

  <button id="btnUpload">Subir archivo de prueba</button>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js";

    // üî• Tus datos reales
    const supabase = createClient(
      "https://eaipcuuvddyrqkbmjmwv.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVhaXBjdXV2ZGR5cnFrYm1qbXciLCJyb2xlIjoiYW5vbiIsImlhdCI6MTcyOTk2MzY2NCwiZXhwIjoxNzYxNTE1NjY0fQ._PusuyuHukGNtkAO643Xjq4jS5Er3NePVKyFJHG2oJY"
    );

    const btn = document.getElementById("btnUpload");

    btn.addEventListener("click", async () => {
      alert("Subiendo archivo‚Ä¶");

      const archivo = new Blob(["Hola desde prueba"], { type: "text/plain" });

      const { data, error } = await supabase.storage
        .from("avatars")
        .upload("test-file.txt", archivo, { upsert: true });

      if (error) {
        console.error("‚ùå Error:", error);
        alert("ERROR subiendo: " + error.message);
      } else {
        console.log("‚úîÔ∏è Subido:", data);
        alert("‚úîÔ∏è Archivo subido con √©xito!");
      }
    });
  </script>

</body>
</html>
